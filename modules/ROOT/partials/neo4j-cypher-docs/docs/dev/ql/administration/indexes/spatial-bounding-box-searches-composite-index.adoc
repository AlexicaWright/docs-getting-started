[[administration-indexes-spatial-bounding-box-searches-composite-index]]
== Spatial bounding box searches (composite index) ==
The ability to do index seeks on bounded ranges works even with the 2D and 3D spatial `Point` types. Any following (non-existence check) predicates (here on property `p.firstname` for index `:Person(place,firstname)`) will be rewritten as existence check with a filter. For index `:Person(firstname,place)`, if the predicate on `firstname` is equality or list membership then the bounded range is handled as a range itself. If the predicate on `firstname` is anything else then the bounded range is rewritten to existence and filter.

.Query
include::includes/administration-indexes-spatial-bounding-box-searches-composite-index.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner COST

Runtime INTERPRETED

Runtime version 4.3

+-----------------+------------------------------------------------------------------------------------------------------+----------------+------+---------+------------------------+
| Operator        | Details                                                                                              | Estimated Rows | Rows | DB Hits | Page Cache Hits/Misses |
+-----------------+------------------------------------------------------------------------------------------------------+----------------+------+---------+------------------------+
| +ProduceResults | person                                                                                               |              0 |    1 |       0 |                    0/0 |
| |               +------------------------------------------------------------------------------------------------------+----------------+------+---------+------------------------+
| +NodeIndexSeek  | person:Person(place, firstname) WHERE place > point({x: $autoint_0, y: $autoint_1}) AND place < poin |              0 |    1 |       2 |                    0/0 |
|                 | t({x: $autoint_2, y: $autoint_3}) AND firstname IS NOT NULL                                          |                |      |         |                        |
+-----------------+------------------------------------------------------------------------------------------------------+----------------+------+---------+------------------------+

Total database accesses: 2, total allocated memory: 64

----
