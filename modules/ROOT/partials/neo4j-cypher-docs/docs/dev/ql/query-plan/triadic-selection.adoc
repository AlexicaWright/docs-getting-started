[[query-plan-triadic-selection]]
== Triadic Selection ==
The `TriadicSelection` operator is used to solve triangular queries, such as the very
common 'find my friend-of-friends that are not already my friend'.
It does so by putting all the friends into a set, and uses the set to check if the
friend-of-friends are already connected to me.
The example finds the names of all friends of my friends that are not already my friends.

.Query
include::includes/query-plan-triadic-selection.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner COST

Runtime SLOTTED

Runtime version 4.3

+-------------------+------------------------------------------+----------------+------+---------+------------------------+
| Operator          | Details                                  | Estimated Rows | Rows | DB Hits | Page Cache Hits/Misses |
+-------------------+------------------------------------------+----------------+------+---------+------------------------+
| +ProduceResults   | `other.name`                             |              0 |    2 |       0 |                    0/0 |
| |                 +------------------------------------------+----------------+------+---------+------------------------+
| +Projection       | other.name AS `other.name`               |              0 |    2 |       2 |                    1/0 |
| |                 +------------------------------------------+----------------+------+---------+------------------------+
| +TriadicSelection | WHERE NOT (me)--(other)                  |              0 |    2 |       0 |                    0/0 |
| |\                +------------------------------------------+----------------+------+---------+------------------------+
| | +Filter         | not anon_17 = anon_36                    |              0 |    2 |       0 |                    0/0 |
| | |               +------------------------------------------+----------------+------+---------+------------------------+
| | +Expand(All)    | (anon_34)-[anon_36:FRIENDS_WITH]-(other) |              0 |    6 |      14 |                    4/0 |
| | |               +------------------------------------------+----------------+------+---------+------------------------+
| | +Argument       | anon_34, anon_17                         |              4 |    4 |       0 |                    0/0 |
| |                 +------------------------------------------+----------------+------+---------+------------------------+
| +Expand(All)      | (me)-[anon_17:FRIENDS_WITH]-(anon_34)    |              4 |    4 |      33 |                   17/0 |
| |                 +------------------------------------------+----------------+------+---------+------------------------+
| +Filter           | me:Person                                |             14 |   14 |      35 |                    1/0 |
| |                 +------------------------------------------+----------------+------+---------+------------------------+
| +AllNodesScan     | me                                       |             35 |   35 |      36 |                    1/0 |
+-------------------+------------------------------------------+----------------+------+---------+------------------------+

Total database accesses: 120, total allocated memory: 64

----
