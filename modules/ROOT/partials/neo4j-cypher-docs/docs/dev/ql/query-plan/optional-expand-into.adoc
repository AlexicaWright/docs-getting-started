[[query-plan-optional-expand-into]]
== Optional Expand Into ==
The `OptionalExpand(Into)` operator is analogous to <<query-plan-expand-into, Expand(Into)>>, apart from when no matching relationships are found.
In this situation, `OptionalExpand(Into)` will return a single row with the relationship and end node set to `null`.
As both the start and end node of the relationship are already in scope, the node with the smallest degree will be used.
This can make a noticeable difference when dense nodes appear as end points.

.Query
include::includes/query-plan-optional-expand-into.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner COST

Runtime PIPELINED

Runtime version 4.3

+-----------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator              | Details                      | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Other               |
+-----------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults       | p                            |             15 |   15 |       0 |                |                        |           | Fused in Pipeline 0 |
| |                     +------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +OptionalExpand(Into) | (l)-[anon_60]->(p)           |             15 |   15 |     105 |           3352 |                        |           | Fused in Pipeline 0 |
| |                     +------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +Expand(All)          | (p)-[works_in:WORKS_IN]->(l) |             15 |   15 |      19 |                |                        |           | Fused in Pipeline 0 |
| |                     +------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +Filter               | p:Person                     |             14 |   14 |       0 |                |                        |           | Fused in Pipeline 0 |
| |                     +------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +AllNodesScan         | p                            |             35 |   35 |      36 |             72 |                   20/0 |     0.814 | Fused in Pipeline 0 |
+-----------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 160, total allocated memory: 3432

----
