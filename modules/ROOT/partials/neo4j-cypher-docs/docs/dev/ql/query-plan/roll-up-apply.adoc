[[query-plan-roll-up-apply]]
== Roll Up Apply ==
The `RollUpApply` operator is used to execute an expression which takes as input a pattern, and returns a list with content from the matched pattern;
for example, when using a pattern expression or pattern comprehension in a query.
This operator is a variation of the <<query-plan-apply, Apply>> operator.

.Query
include::includes/query-plan-roll-up-apply.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner COST

Runtime SLOTTED

Runtime version 4.3

+-----------------+------------------------------------+----------------+------+---------+------------------------+
| Operator        | Details                            | Estimated Rows | Rows | DB Hits | Page Cache Hits/Misses |
+-----------------+------------------------------------+----------------+------+---------+------------------------+
| +ProduceResults | `p.name`, cities                   |             14 |   14 |       0 |                    0/0 |
| |               +------------------------------------+----------------+------+---------+------------------------+
| +Projection     | p.name AS `p.name`                 |             14 |   14 |      14 |                    0/0 |
| |               +------------------------------------+----------------+------+---------+------------------------+
| +RollUpApply    | cities, anon_32                    |             14 |   14 |       0 |                    0/0 |
| |\              +------------------------------------+----------------+------+---------+------------------------+
| | +Projection   | location.name AS anon_32           |              6 |   15 |      15 |                    1/0 |
| | |             +------------------------------------+----------------+------+---------+------------------------+
| | +Expand(All)  | (p)-[anon_37:WORKS_IN]->(location) |              6 |   15 |      33 |                   15/0 |
| | |             +------------------------------------+----------------+------+---------+------------------------+
| | +Argument     | p                                  |             14 |   14 |       0 |                    0/0 |
| |               +------------------------------------+----------------+------+---------+------------------------+
| +Filter         | p:Person                           |             14 |   14 |      35 |                    1/0 |
| |               +------------------------------------+----------------+------+---------+------------------------+
| +AllNodesScan   | p                                  |             35 |   35 |      36 |                    1/0 |
+-----------------+------------------------------------+----------------+------+---------+------------------------+

Total database accesses: 133, total allocated memory: 64

----
